{% extends "layout.html" %}

{% block title %}Home{% endblock %}

{% block content %}

<!-- ===== HERO ===== -->
<section id="hero">
    <div class="hero-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <div class="hero-container">
        <div class="hero-text">
            <div class="hero-badge">
                <span class="badge-dot"></span>
                Available for work
            </div>

            <h1 class="hero-title">
                Hi, I'm<br>
                <span class="gradient-text">{{ profile.name if profile else 'Zafar Aftab' }}</span>
            </h1>

            <p class="hero-subtitle">
                <span id="typing-text"></span><span class="typing-cursor">|</span>
            </p>

            <p class="hero-description">
                {{ profile.summary if profile else 'Crafting elegant solutions to complex problems with clean code and creative thinking.' }}
            </p>

            <div class="hero-actions">
                <a href="{{ url_for('contact_page') }}" class="btn-primary">Get In Touch &rarr;</a>
                <a href="{{ url_for('projects_page') }}" class="btn-secondary">View Projects</a>
            </div>
        </div>

        <div class="hero-visual">
            <div class="avatar-ring">
                <div class="avatar-glow"></div>
                <div class="avatar-initials">
                    {{ profile.name[:2].upper() if profile else 'ZA' }}
                </div>
            </div>
            <div class="hero-stats">
                <div class="stat-pill">
                    <span class="stat-num">3+</span>
                    <span class="stat-lbl">Years Exp.</span>
                </div>
                <div class="stat-pill">
                    <span class="stat-num">{{ projects | length if projects else '10' }}+</span>
                    <span class="stat-lbl">Projects</span>
                </div>
                <div class="stat-pill">
                    <span class="stat-num">100%</span>
                    <span class="stat-lbl">Committed</span>
                </div>
            </div>
        </div>
    </div>

    <div class="scroll-hint">
        <div class="scroll-mouse"><div class="scroll-wheel"></div></div>
        <span>Scroll</span>
    </div>
</section>

<!-- ===== TECH STRIP ===== -->
<section id="tech-strip">
    <div class="section-wrap">
        <div class="tech-scroll-track">
            <div class="tech-item">üêç Python</div>
            <div class="tech-item">‚öóÔ∏è Flask</div>
            <div class="tech-item">üåê JavaScript</div>
            <div class="tech-item">‚öõÔ∏è React</div>
            <div class="tech-item">üêò PostgreSQL</div>
            <div class="tech-item">üê≥ Docker</div>
            <div class="tech-item">‚òÅÔ∏è AWS</div>
            <div class="tech-item">üêô Git &amp; GitHub</div>
            <div class="tech-item">üé® CSS / Tailwind</div>
            <div class="tech-item">üîß REST APIs</div>
        </div>
    </div>
</section>

<!-- ===== FEATURED PROJECTS ===== -->
{% if projects %}
<section id="featured-projects">
    <div class="section-wrap">
        <div class="section-header reveal">
            <span class="section-eyebrow">Portfolio</span>
            <h2 class="section-title">Featured <span class="gradient-text">Projects</span></h2>
            <p class="section-sub">A selection of my recent work ‚Äî from web apps to APIs and beyond.</p>
        </div>

        <div class="projects-grid">
            {% for project in projects[:3] %}
                <article class="proj-card glass-card reveal">
                    <div class="proj-card-img-wrap">
                        {% if project.image_url %}
                            <img src="{{ project.image_url }}" alt="{{ project.title }}" class="proj-card-img">
                        {% else %}
                            <div class="proj-card-placeholder">
                                <span class="proj-placeholder-icon">üõ†Ô∏è</span>
                            </div>
                        {% endif %}
                        <div class="proj-card-overlay"></div>
                    </div>
                    <div class="proj-card-body">
                        <div class="proj-tech-list">
                            {% for tech in project.tech_stack.split(', ')[:3] %}
                                <span class="proj-tech-badge">{{ tech }}</span>
                            {% endfor %}
                        </div>
                        <h3 class="proj-card-title">{{ project.title }}</h3>
                        <p class="proj-card-desc">{{ project.description }}</p>
                        <div class="proj-card-links">
                            <a href="{{ url_for('project_detail', project_id=project.id) }}" class="proj-link-btn">Details</a>
                            {% if project.live_url %}
                                <a href="{{ project.live_url }}" target="_blank" class="proj-link-btn proj-link-ghost">Live ‚Üó</a>
                            {% endif %}
                            {% if project.repo_url %}
                                <a href="{{ project.repo_url }}" target="_blank" class="proj-link-btn proj-link-ghost">Code</a>
                            {% endif %}
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>

        <div class="section-footer-cta">
            <a href="{{ url_for('projects_page') }}" class="btn-secondary">View All Projects &rarr;</a>
        </div>
    </div>
</section>
{% endif %}

<!-- ===== HOME CTA ===== -->
<section id="home-cta">
    <div class="section-wrap">
        <div class="cta-card glass-card reveal">
            <span class="section-eyebrow">Let's Collaborate</span>
            <h2 class="section-title">Have a project in mind?</h2>
            <p class="section-sub">I'm always open to discussing new ideas, creative collaborations, and freelance opportunities.</p>
            <div class="cta-actions">
                <a href="{{ url_for('contact_page') }}" class="btn-primary">Start a Conversation &rarr;</a>
                <a href="{{ url_for('resume') }}" class="btn-secondary" target="_blank">Download Resume ‚Üó</a>
            </div>
        </div>
    </div>
</section>

<!-- ===== TYPING EFFECT ===== -->
<script>
    (function () {
        const phrases = [
            '{{ profile.title if profile else "Full-Stack Developer" }}',
            'Python & Flask Expert',
            'UI/UX Enthusiast',
            'Problem Solver'
        ];
        const el = document.getElementById('typing-text');
        let pIdx = 0, cIdx = 0, deleting = false;

        function tick() {
            const phrase = phrases[pIdx];
            if (!deleting) {
                el.textContent = phrase.slice(0, ++cIdx);
                if (cIdx === phrase.length) {
                    deleting = true;
                    setTimeout(tick, 2000);
                    return;
                }
            } else {
                el.textContent = phrase.slice(0, --cIdx);
                if (cIdx === 0) {
                    deleting = false;
                    pIdx = (pIdx + 1) % phrases.length;
                }
            }
            setTimeout(tick, deleting ? 50 : 90);
        }
        tick();
    })();
</script>

{% endblock %}
